<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Diary App</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
<style>
body {
  background: linear-gradient(135deg, #ffe6f0, #ccefff);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #333;
  margin: 0; padding: 0;
  position: relative;
  overflow-x: hidden;
  transition: background 0.5s, color 0.5s;
}
h1 {
  background: rgba(255,255,255,0.85);
  display: inline-block;
  padding:10px 20px;
  border-radius:15px;
  box-shadow:0 4px 10px rgba(0,0,0,0.2);
}
.diary-card {
  background: rgba(255,255,255,0.95);
  border-radius:15px;
  padding:25px;
  box-shadow:0 8px 20px rgba(0,0,0,0.25);
  position: relative; z-index:10;
  transition: transform 0.4s, box-shadow 0.4s;
}
.diary-card:hover { transform:translateY(-5px); box-shadow:0 12px 30px rgba(0,0,0,0.3); }
#entriesContainer .entry {
  background: rgba(255,255,255,0.85);
  border-left:5px solid #0d6efd;
  padding:15px;
  margin-bottom:20px;
  border-radius:12px;
  backdrop-filter: blur(3px);
  position:relative;
  z-index:5;
}
#entriesContainer .entry:hover { transform: scale(1.02); box-shadow:0 6px 15px rgba(0,0,0,0.2); }
textarea::placeholder { color:#555; font-style:italic; }
.btn-primary { background: linear-gradient(45deg,#0d6efd,#6610f2); border:none; }
.btn-primary:hover { transform: scale(1.05); box-shadow:0 6px 15px rgba(0,0,0,0.25); transition:0.3s; }
.delete-btn, .edit-btn { transition: transform 0.2s; }
.delete-btn:hover, .edit-btn:hover { transform: scale(1.1); }

/* Dark Mode */
body.dark-mode { background:#0d0d2b; color:#f1f1f1; }
body.dark-mode .diary-card { background: rgba(40,40,55,0.95); box-shadow:0 8px 20px rgba(0,0,0,0.7); }
body.dark-mode #entriesContainer .entry { background: rgba(60,60,80,0.85); border-left-color:#6610f2; color:#f1f1f1; }
body.dark-mode h1 { background: rgba(50,50,70,0.85); color:#fff;}
body.dark-mode textarea, body.dark-mode input, body.dark-mode select { background: rgba(60,60,80,0.9); color:#f1f1f1; border:1px solid #444; }
body.dark-mode ::placeholder { color:#ccc; }
body.dark-mode .btn-primary { background: linear-gradient(45deg,#6610f2,#0d6efd); }

/* Stars & Moon */
#starsContainer { position: fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:0;}
.star { position:absolute; background:white; border-radius:50%; opacity:0.8; animation: twinkle 2s infinite alternate;}
@keyframes twinkle {0%{transform:scale(1);opacity:0.7;}50%{transform:scale(1.3);opacity:1;}100%{transform:scale(1);opacity:0.7;}}
body.dark-mode::after { content:'🌙'; position:fixed; top:50px; right:50px; font-size:80px; animation:moonMove 20s infinite linear alternate; }
@keyframes moonMove {0%{transform:translateY(0) rotate(0deg);}50%{transform:translateY(5px) rotate(5deg);}100%{transform:translateY(0) rotate(0deg);}}
.shooting-star { position:absolute; width:2px; height:100px; background:linear-gradient(45deg,white,rgba(255,255,255,0)); transform:rotate(45deg); animation:shoot 1s linear forwards;}
@keyframes shoot {0%{transform:translate(0,0) rotate(45deg);opacity:1;}100%{transform:translate(-500px,500px) rotate(45deg);opacity:0;}}

/* Flowers for light mode */
#flowersContainer { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:0; }
.flower { position:absolute; width:20px; height:20px; background-size:contain; background-repeat:no-repeat; opacity:0; pointer-events:none; }
</style>
</head>
<body>
<div id="starsContainer"></div>
<div id="flowersContainer"></div>

<div class="container my-5">
  <h1 class="text-center mb-4 animate__animated animate__fadeInDown"> <img src="heart-balloon_2401468.png" alt="" class="img-fluid" height="70px", width="70px"> My Diary App</h1>
  <div class="d-flex justify-content-end mb-3">
    <label class="form-check-label me-2" for="darkModeToggle">🌙 Dark Mode</label>
    <input type="checkbox" id="darkModeToggle" class="form-check-input">
  </div>

  <div class="card p-4 shadow diary-card">
    <div class="mb-3">
      <label for="diaryDate" class="form-label">Date & Time</label>
      <input type="text" id="diaryDate" class="form-control" readonly>
    </div>
    <div class="mb-3">
      <label for="diaryEntry" class="form-label">Write your diary entry ✍️</label>
      <textarea id="diaryEntry" class="form-control" rows="5" placeholder="Type something..."></textarea>
    </div>
    <div class="mb-3">
      <label for="emojiPicker" class="form-label">Add Emoji 😊</label>
      <select id="emojiPicker" class="form-select">
        <option value="">Select Emoji</option>
        <option value="😀">😀</option>
        <option value="😂">😂</option>
        <option value="😍">😍</option>
        <option value="😢">😢</option>
        <option value="😎">😎</option>
        <option value="👍">👍</option>
      </select>
    </div>
    <div class="mb-3">
      <label for="imageInput" class="form-label">Add Image 🖼️</label>
      <input type="file" id="imageInput" class="form-control" accept="image/*">
      <img id="previewImage" src="" alt="Preview" class="img-fluid mt-2" style="display:none; max-height:200px; border-radius:10px;">
    </div>
    <button class="btn btn-primary w-100" id="saveBtn">Save Entry 💾</button>
  </div>

  <h2 class="mt-5 mb-3">Your Entries 📖</h2>
  <div id="entriesContainer"></div>
</div>

<script>
const diaryDate = document.getElementById('diaryDate');
const diaryEntry = document.getElementById('diaryEntry');
const emojiPicker = document.getElementById('emojiPicker');
const saveBtn = document.getElementById('saveBtn');
const entriesContainer = document.getElementById('entriesContainer');
const darkModeToggle = document.getElementById('darkModeToggle');
const starsContainer = document.getElementById('starsContainer');
const flowersContainer = document.getElementById('flowersContainer');
const imageInput = document.getElementById('imageInput');
const previewImage = document.getElementById('previewImage');

// Date & Time
function updateDateTime(){ diaryDate.value = new Date().toLocaleString(); }
updateDateTime(); setInterval(updateDateTime,1000);

// Emoji picker
emojiPicker.addEventListener('change',()=>{ diaryEntry.value+=emojiPicker.value; emojiPicker.value=''; });

// Image preview
imageInput.addEventListener('change', () => {
  const file = imageInput.files[0];
  if(file){ const reader = new FileReader(); reader.onload = e=>{ previewImage.src=e.target.result; previewImage.style.display='block'; }; reader.readAsDataURL(file);}
  else{ previewImage.src=''; previewImage.style.display='none'; }
});

// Diary Entries
function loadEntries(){
  entriesContainer.innerHTML='';
  const saved=JSON.parse(localStorage.getItem('diaryEntries'))||[];
  saved.reverse().forEach((e,i)=>addEntryToDOM(e.date,e.text,saved.length-1-i,e.image));
}
function addEntryToDOM(date,text,index,image=''){
  const div=document.createElement('div');
  div.className='entry animate__animated animate__fadeInUp';
  div.innerHTML=`<div class="d-flex justify-content-between align-items-start">
  <strong>${date}</strong>
  <div>
    <button class="btn btn-sm btn-warning edit-btn me-2" data-index="${index}">✏️ Edit</button>
    <button class="btn btn-sm btn-danger delete-btn" data-index="${index}">🗑 Delete</button>
  </div>
  </div>
  <p>${text}</p>
  ${image?`<img src="${image}" class="img-fluid mt-2" style="max-height:200px;border-radius:10px;">`:''}`;
  entriesContainer.prepend(div);
  div.querySelector('.delete-btn').addEventListener('click',()=>deleteEntry(index));
  div.querySelector('.edit-btn').addEventListener('click',()=>editEntry(index));
}
function saveEntry(){ 
  if(diaryEntry.value.trim()==='' && !previewImage.src){ alert('Write something or add an image!'); return; }
  const entry={date:diaryDate.value,text:diaryEntry.value,image:previewImage.src||''};
  const saved=JSON.parse(localStorage.getItem('diaryEntries'))||[];
  saved.push(entry);
  localStorage.setItem('diaryEntries',JSON.stringify(saved));
  addEntryToDOM(entry.date,entry.text,saved.length-1,entry.image);
  diaryEntry.value=''; previewImage.src=''; previewImage.style.display='none'; imageInput.value='';
}
saveBtn.onclick=saveEntry;

function deleteEntry(index){
  const saved=JSON.parse(localStorage.getItem('diaryEntries'))||[];
  saved.splice(index,1);
  localStorage.setItem('diaryEntries',JSON.stringify(saved));
  loadEntries();
}
function editEntry(index){
  const saved=JSON.parse(localStorage.getItem('diaryEntries'))||[];
  const entry=saved[index];
  diaryEntry.value=entry.text;
  previewImage.src=entry.image||'';
  previewImage.style.display=entry.image?'block':'none';
  imageInput.value='';
  saveBtn.textContent='Update Entry ✏️';
  saveBtn.onclick=function(){
    saved[index]={date:new Date().toLocaleString(),text:diaryEntry.value,image:previewImage.src||''};
    localStorage.setItem('diaryEntries',JSON.stringify(saved));
    loadEntries();
    diaryEntry.value=''; previewImage.src=''; previewImage.style.display='none'; imageInput.value='';
    saveBtn.textContent='Save Entry 💾';
    saveBtn.onclick=saveEntry;
  };
}
loadEntries();

// Dark Mode toggle
if(localStorage.getItem('darkMode')==='enabled'){ document.body.classList.add('dark-mode'); darkModeToggle.checked=true; createStars(150);}
darkModeToggle.addEventListener('change',()=>{
  if(darkModeToggle.checked){ document.body.classList.add('dark-mode'); localStorage.setItem('darkMode','enabled'); createStars(150); flowersContainer.innerHTML=''; }
  else{ document.body.classList.remove('dark-mode'); localStorage.setItem('darkMode','disabled'); starsContainer.innerHTML=''; createFlowers(30); }
});

// Stars
function createStars(count){
  starsContainer.innerHTML='';
  for(let i=0;i<count;i++){
    const star=document.createElement('div'); star.className='star';
    const size=Math.random()*2+1; star.style.width=`${size}px`; star.style.height=`${size}px`;
    star.style.top=`${Math.random()*100}%`; star.style.left=`${Math.random()*100}%`;
    star.style.animationDuration=`${Math.random()*2+1}s`; starsContainer.appendChild(star);
  }
  setInterval(()=>{ shootingStar(); },2000);
}
function shootingStar(){
  const star=document.createElement('div'); star.className='shooting-star';
  star.style.top=Math.random()*window.innerHeight+'px'; star.style.left=Math.random()*window.innerWidth+'px';
  starsContainer.appendChild(star); setTimeout(()=>star.remove(),1000);
}

// Flowers
const flowerImages=[
  'https://cdn-icons-png.flaticon.com/512/616/616408.png',
  'https://cdn-icons-png.flaticon.com/512/616/616401.png',
  'https://cdn-icons-png.flaticon.com/512/616/616406.png',
  'https://cdn-icons-png.flaticon.com/512/616/616399.png',
  'https://cdn-icons-png.flaticon.com/512/616/616402.png'
];
function createFlowers(count){
  flowersContainer.innerHTML='';
  for(let i=0;i<count;i++){
    const flower=document.createElement('div'); flower.className='flower';
    flower.style.backgroundImage=`url(${flowerImages[Math.floor(Math.random()*flowerImages.length)]})`;
    const size=15+Math.random()*25; flower.style.width=size+'px'; flower.style.height=size+'px';
    flower.style.left=Math.random()*100+'vw'; flower.style.top=Math.random()*100+'vh';
    const duration=8+Math.random()*7; const sway=20+Math.random()*20; const drift=50+Math.random()*50; const delay=Math.random()*5;
    flower.animate([
      { transform:`translate(0,0) rotate(0deg)`, opacity:0 },
      { transform:`translate(${sway}px, -${drift}px) rotate(360deg)`, opacity:1 },
      { transform:`translate(${sway*2}px, -${drift*2}px) rotate(720deg)`, opacity:0 }
    ], { duration:(duration*1000), iterations: Infinity, delay: delay*1000 });
    flowersContainer.appendChild(flower);
  }
}
if(!darkModeToggle.checked) createFlowers(30);
</script>
</body>
</html>

